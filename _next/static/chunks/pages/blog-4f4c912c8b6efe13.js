(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{3986:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog",function(){return n(8715)}])},8715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(5893),a=n(7294),l=n(8999),i=n(5675),c=n.n(i),o=n(1163);async function fetchRSSFeed(e){try{let t="https://api.rss2json.com/v1/api.json?rss_url=".concat(encodeURIComponent(e)),n=await fetch(t);if(!n.ok)throw Error("Failed to fetch RSS feed: ".concat(n.statusText));let r=await n.json();return r.items||[]}catch(e){return console.error("Error fetching RSS feed:",e),[]}}async function fetchZennArticles(e){let t=await fetchRSSFeed("https://zenn.dev/".concat(e,"/feed?all=1"));return t.map(e=>{var t;let n=null===(t=e.enclosure)||void 0===t?void 0:t.url;return!n&&e.link&&(n="/api/zenn-ogp?url=".concat(encodeURIComponent(e.link))),{title:e.title,link:e.link,date:e.pubDate,thumbnail:n,description:e.description,platform:"zenn"}})}async function fetchSpeakerDeckPresentations(e){let t=await fetchRSSFeed("https://speakerdeck.com/".concat(e,".rss")),n=await Promise.all(t.map(async e=>{try{let t="/api/speaker-deck-thumbnail?url=".concat(encodeURIComponent(e.link));return{title:e.title,link:e.link,date:e.pubDate,thumbnail:t,description:e.description,platform:"speakerdeck"}}catch(t){return console.error("Error processing Speaker Deck presentation:",t),{title:e.title,link:e.link,date:e.pubDate,thumbnail:void 0,description:e.description,platform:"speakerdeck"}}}));return n}async function fetchAllArticles(e,t){let[n,r]=await Promise.all([fetchZennArticles(e),fetchSpeakerDeckPresentations(t)]),a=[...n,...r];return a.sort((e,t)=>{let n=new Date(e.date).getTime(),r=new Date(t.date).getTime();return r-n})}n(8764).lW;var s=n(4266),d=n.n(s),u=n(3454);let BlogPage=()=>{let e=(0,o.useRouter)(),[t,n]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let loadArticles=async()=>{i(!0);try{let e=u.env.NEXT_PUBLIC_ZENN_USERNAME||"king",t=u.env.NEXT_PUBLIC_SPEAKERDECK_USERNAME||"sugarcat7",r=await fetchAllArticles(e,t);n(r)}catch(e){console.error("Failed to fetch articles:",e)}finally{i(!1)}};loadArticles()},[]),(0,r.jsxs)("div",{className:d().Blog,children:[(0,r.jsx)("h1",{children:"登壇 / 記事"}),l?(0,r.jsx)("p",{children:"読み込み中..."}):(0,r.jsx)("div",{className:d().GridArticles,children:t.map((t,n)=>(0,r.jsxs)("div",{className:d().ArticleContainer,onClick:()=>e.push(t.link),children:[(0,r.jsxs)("div",{className:d().ImageWrapper,children:[t.thumbnail?(0,r.jsx)(c(),{src:t.thumbnail,width:16,height:9,alt:t.title,sizes:"(max-width: 767px) 50vw, (max-width: 500px) 100vw, 33vw",style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{let t=e.currentTarget.closest(".".concat(d().ImageWrapper));if(t){var n;e.currentTarget.style.display="none",null===(n=t.querySelector(".".concat(d().NoImage)))||void 0===n||n.classList.remove(d().hidden)}}}):null,(0,r.jsx)("div",{className:"".concat(d().NoImage," ").concat(t.thumbnail?d().hidden:""),children:(0,r.jsxs)("div",{className:d().NoImageContent,children:[(0,r.jsx)("div",{className:d().Platform,children:"zenn"===t.platform?"Zenn":"Speaker Deck"}),(0,r.jsx)("div",{className:d().Title,children:t.title})]})})]}),(0,r.jsx)("h2",{children:t.title}),(0,r.jsx)("p",{className:d().Date,children:new Date(t.date).toLocaleDateString("ja-JP")})]},n))})]})};BlogPage.getLayout=function(e){return(0,r.jsx)(l.Ar,{children:e})};var h=BlogPage},4266:function(e){e.exports={Blog:"Blog_Blog__Mrq_o",GridArticles:"Blog_GridArticles__Vf2nH",ArticleContainer:"Blog_ArticleContainer__38U_y",ImageWrapper:"Blog_ImageWrapper__JbrNl",Date:"Blog_Date__3R2Ou",NoImage:"Blog_NoImage__OF49q",hidden:"Blog_hidden__BsRAU",NoImageContent:"Blog_NoImageContent__L3OJc",Platform:"Blog_Platform__ko3Lz",Title:"Blog_Title__NSDRh"}}},function(e){e.O(0,[640,594,999,774,888,179],function(){return e(e.s=3986)}),_N_E=e.O()}]);